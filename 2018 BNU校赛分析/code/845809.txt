#include<iostream>
using namespace std;
int main()
{
	char a[20];
	int n,i,k,j,count,dn,xn,num,flag =1;
	cin>>n;
	for(i=0;i<n;i++)
	{
		cin>>a;
		count=0;
		for(k=0;k<20;k++)
		{
			if(a[k]=='\0')
			{
				break;
			}
			count++;
		}
		num=0;
		flag =1;
		dn=1;
		for(j=0;j<count;j++)
		{
			if(j>0)
			{
			if(a[j]<97)
			{
				if(num<2)
				{
					flag=0;
					break;
				}
				else
				{
					num=1;
					dn++;
				}
			}
			else
			{
				num++;
			}
			}
			if(j==0)
			{
				num=1;
			}
		}
		if(a[count-1]<97)
		{
			flag=0;
		}
		if(dn<2)
		{
			flag=0;
		}
		if(flag==1)
		{
		
		for(j=0;j<count;j++)
		{
		
			if(a[j]<97&&j!=0)
			{
				if(a[j]=='A')
				cout<<'_'<<'a';
				if(a[j]=='B')
				cout<<'_'<<'b';
				if(a[j]=='C')
				cout<<'_'<<'c';
				if(a[j]=='D')
				cout<<'_'<<'d';
				if(a[j]=='E')
				cout<<'_'<<'e';
				if(a[j]=='F')
				cout<<'_'<<'f';
				if(a[j]=='G')
				cout<<'_'<<'g';
				if(a[j]=='H')
				cout<<'_'<<'h';
				if(a[j]=='I')
				cout<<'_'<<'i';
				if(a[j]=='J')
				cout<<'_'<<'j';
				if(a[j]=='K')
				cout<<'_'<<'k';
				if(a[j]=='L')
				cout<<'_'<<'l';
				if(a[j]=='M')
				cout<<'_'<<'m';
				if(a[j]=='N')
				cout<<'_'<<'n';
				if(a[j]=='O')
				cout<<'_'<<'o';
				if(a[j]=='P')
				cout<<'_'<<'p';
				if(a[j]=='Q')
				cout<<'_'<<'q';
				if(a[j]=='R')
				cout<<'_'<<'r';
				if(a[j]=='S')
				cout<<'_'<<'s';
				if(a[j]=='T')
				cout<<'_'<<'t';
				if(a[j]=='U')
				cout<<'_'<<'u';
				if(a[j]=='V')
				cout<<'_'<<'v';
				if(a[j]=='W')
				cout<<'_'<<'w';
				if(a[j]=='X')
				cout<<'_'<<'x';
				if(a[j]=='Y')
				cout<<'_'<<'y';
				if(a[j]=='Z')
				cout<<'_'<<'z';
				
			}
			else
			{
				if(a[j]<97&&j==0)
			{
				if(a[j]=='A')
				cout<<'a';
				if(a[j]=='B')
				cout<<'b';
				if(a[j]=='C')
				cout<<'c';
				if(a[j]=='D')
				cout<<'d';
				if(a[j]=='E')
				cout<<'e';
				if(a[j]=='F')
				cout<<'f';
				if(a[j]=='G')
				cout<<'g';
				if(a[j]=='H')
				cout<<'h';
				if(a[j]=='I')
				cout<<'i';
				if(a[j]=='J')
				cout<<'j';
				if(a[j]=='K')
				cout<<'k';
				if(a[j]=='L')
				cout<<'l';
				if(a[j]=='M')
				cout<<'m';
				if(a[j]=='N')
				cout<<'n';
				if(a[j]=='O')
				cout<<'o';
				if(a[j]=='P')
				cout<<'p';
				if(a[j]=='Q')
				cout<<'q';
				if(a[j]=='R')
				cout<<'r';
				if(a[j]=='S')
				cout<<'s';
				if(a[j]=='T')
				cout<<'t';
				if(a[j]=='U')
				cout<<'u';
				if(a[j]=='V')
				cout<<'v';
				if(a[j]=='W')
				cout<<'w';
				if(a[j]=='X')
				cout<<'x';
				if(a[j]=='Y')
				cout<<'y';
				if(a[j]=='Z')
				cout<<'z';
				
			}
			else
			{
				cout<<a[j];
			}
		}
	}
		cout<<endl;	
	}
	if(flag==0)
	{
		for(j=0;j<count;j++)
		{
			cout<<a[j];
		}
		cout<<endl;
	}
	
}
}
